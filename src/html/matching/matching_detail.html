@@include('../include/head.html')

<body>
  <div class="wrap">
    @@include('../include/header_sub.html')

    <div class="l-container-matching matching-container">
      <h2 class="is-blind">손해사정사 매칭 상세페이지</h2>
      <div class="matching-content rowContent__inner d-flex f-wrap">
        <aside class="matching-detail-side">
          <div class="side-head">
            <div class="detailCard">
              <div class="detailCard__body">
                <figure class="detailCard__fig">
                  <figcaption>손해사정사 사진</figcaption>
                  <img class="detailCard__img" src="@@webRoot/assets/images/sample/img-card-detail-sample.jpg">
                </figure>
                <p class="detailCard__company">(현) 골고루손해사정법인</p>
                <p class="detailCard__part">신체팀, 팀장</p>
                <p class="detailCard__tm">golgorubosang</p>
              </div>
              <div class="detailCard__foot d-flex-c-c">
                <p class="detailCard__name">홍길동</p>
              </div>
            </div>
            <div class="location d-flex-sb-c">
              <p class="location-txt">서울 금천구 가산디지털1로 181 가산W센터</p>
              <button class="copy-location d-flex-c-c" onclick="copyText('.side-head .location-txt')">주소복사</button>
            </div>
          </div>
          <div class="side-foot">
            <div class="comment-wrap">
              <p class="comment">보상업무의 든든한 파트너가<br>되어 드리겠습니다.</p>
            </div>

            <!-- 활성화 -->
            <ul class="attach-link d-flex-s-s">
              <li class="link-item"><a href="#" target="_blank" class="link-btn blog is-active"><span class="link-txt">블로그</span></a></li>
              <li class="link-item"><a href="#" target="_blank" class="link-btn facebook is-active"><span class="link-txt">페이스북</span></a></li>
              <li class="link-item"><a href="#" target="_blank" class="link-btn insta is-active"><span class="link-txt">인스타그램</span></a></li>
              <li class="link-item"><a href="#" target="_blank" class="link-btn youtube is-active"><span class="link-txt">유튜브</span></a></li>
              <li class="link-item"><a href="#" target="_blank" class="link-btn attach-file is-active"><span class="link-txt">첨부파일</span></a></li>
            </ul>
            <!-- 비활성화 link-btn에 is-active로 구분 -->
          </div>
        </aside>

        <div class="matching-detail-content">
          <div class="agent-summary-wrap" style="background: #162550">
            <div class="fig-section">
              <figure>
                <figcaption>상세 설명 이미지</figcaption>
                <img src="@@webRoot/assets/images/sample/img-detail-sample03-01.jpg" alt="팩트체크 고민노 보상고 고민 말고 보상 받자 보상 실체 대공개">
              </figure>
            </div>
            <div class="summary-tbl-wrap">
              <table class="summary-tbl">
                <caption>손해사정사 요약 정보</caption>
                <colgroup>
                  <col style="width: 204px;">
                  <col style="width: auto;">
                </colgroup>
                <tbody>
                  <tr>
                    <th scope="row">강점 분야</th>
                    <td>
                      <span class="chip-pc">후유장애</span>
                      <span class="chip-pc">사망</span>
                      <span class="chip-pc">면책사고</span>
                    </td>
                  </tr>
                  <tr>
                    <th scope="row">상담 가능 지역</th>
                    <td>서울, 인천, 경기</td>
                  </tr>
                  <tr>
                    <th scope="row">손해사정사 보유 자격</th>
                    <td>4종 (교통사고, 배상책임, 상해질병, 근로자재해)</td>
                  </tr>
                  <tr>
                    <th scope="row">전문 분야</th>
                    <td>실손, 질병, 상해, 어린이, 태아, 교통사고(대인), 연금, 배상책임, 근로재해, 학교안전사고, 여행자, 골프, 생명</td>
                  </tr>
                  <tr>
                    <th scope="row">현 소속</th>
                    <td>골고루손해사정법인</td>
                  </tr>
                  <tr>
                    <th scope="row">경력 사항</th>
                    <td>
                      가나 기업영업팀<br>
                      다라 손해사정법인 신체팀<br>
                      마바 손해사정법인 재물팀<br>
                      (현) 골고루손해사정법인
                    </td>
                  </tr>
                </tbody>
              </table>
            </div>

            <div class="fig-section">
              <figure>
                <figcaption>상세 설명 이미지</figcaption>
                <img src="@@webRoot/assets/images/sample/img-detail-sample03-02.jpg" alt="보상에 대한 모든 것 보험과 보상은 다릅니다. 고민말고, 보상 받으세요. 보험 가입할 땐 쉬웠는데? 보상 받으실 땐 오래 걸리고 힘드시죠? 받을 수 있는 금액 아니었나? 이렇게 적어? 당연히 받으셔야 할 보험금, 찾아 드리겠습니다! 보험 용어, 어려운게 한 두 개가 아니네... 아는 만큼 제대로 보상 받으실 수 있습니다! 나를 위한 금액으로 보상되어지는건가? 고객님의 입장에서 서서 도와 드립니다.">
              </figure>
            </div>
            <div class="location-wrap">
              <h3 class="location-tit"><span class="txt">처음부터 끝까지 고객님의 입장에 서서  도와 드리겠습니다!</span></h3>
              <div class="location d-flex-sb-c">
                <p class="location-txt">서울 금천구 가산디지털1로 181 가산W센터</p>
                <button class="copy-location d-flex-c-c" onclick="copyText('.agent-summary-wrap .location-txt')">주소복사</button>
              </div>
              <!-- 지도 노드 -->
              <div id="map" class="location-map"></div>
            </div>
          </div>

          <div class="btn-row-wrap">
            <button class="btn-primary-chg s-big btn-step-chg" onclick="openModal('reception01')">상담하기</button>
          </div>
        </div>
      </div>
    </div>

    @@include('../include/footer_sub.html')
  </div>

  @@include('../modal/reception01.html')
  @@include('../modal/reception02.html')
  @@include('../modal/reception03.html')
  @@include('../modal/reception_done.html')

  <script type="text/javascript" src="//dapi.kakao.com/v2/maps/sdk.js?appkey=c7de0761cab8833759b89d424e98bd32&libraries=services"></script>
  <script>
    // gnb 현재 페이지 활성화
    var page = 'matching'

    // 지도 실행 스크립트
    var mapContainer = document.getElementById('map'), // 지도를 표시할 div 
    mapOption = {
      center: new kakao.maps.LatLng(33.450701, 126.570667), // 지도의 중심좌표 아무곳이든 필수입력
      level: 4 // 지도의 확대 레벨
    };  

    // 도로명주소 - 데이터를 변수에 대입해도 됩니다.
    // const address = some data
    const address = $('.location-txt').text()

    // 손해사정사 이름 - 데이터를 변수에 대입해도 됩니다.
    // const agentName = some data
    const agentName = $('.detailCard__name').text()

    // 지도를 생성합니다    
    var map = new kakao.maps.Map(mapContainer, mapOption); 

    // 주소-좌표 변환 객체를 생성합니다
    var geocoder = new kakao.maps.services.Geocoder();

    // 주소로 좌표를 검색합니다
    geocoder.addressSearch(address, function(result, status) {
      // 정상적으로 검색이 완료됐으면 
      if (status === kakao.maps.services.Status.OK) {
        var coords = new kakao.maps.LatLng(result[0].y, result[0].x);
        // 결과값으로 받은 위치를 마커로 표시합니다
        var marker = new kakao.maps.Marker({
            map: map,
            position: coords
        });
        // 인포윈도우로 장소에 대한 설명을 표시합니다 (필요한 경우에만)
        var infowindow = new kakao.maps.InfoWindow({
            content: '<div class="info-window d-flex-c-c">' + agentName + ' 손해사정사</div>'
        });
        infowindow.open(map, marker);
        // 지도의 중심을 결과값으로 받은 위치로 이동시킵니다
        map.setCenter(coords);
      } 
    });    
  </script>
</body>
</html>